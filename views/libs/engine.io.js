!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.eio=e()}}(function(){var e,t,n;return function r(e,t,n){function i(o,u){if(!t[o]){if(!e[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(s)return s(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=t[o]={exports:{}};e[o][0].call(f.exports,function(t){var n=e[o][1][t];return i(n?n:t)},f,f.exports,r,e,t,n)}return t[o].exports}var s=typeof require=="function"&&require;for(var o=0;o<n.length;o++)i(n[o]);return i}({1:[function(e,t,n){t.exports=e("./lib/")},{"./lib/":2}],2:[function(e,t,n){t.exports=e("./socket");t.exports.parser=e("engine.io-parser")},{"./socket":3,"engine.io-parser":14}],3:[function(e,t,n){(function(n){function c(){}function h(e,t){if(!(this instanceof h))return new h(e,t);t=t||{};if(e&&"object"==typeof e){t=e;e=null}if(e){e=a(e);t.host=e.host;t.secure=e.protocol=="https"||e.protocol=="wss";t.port=e.port;if(e.query)t.query=e.query}this.secure=null!=t.secure?t.secure:n.location&&"https:"==location.protocol;if(t.host){var r=t.host.split(":");t.hostname=r.shift();if(r.length)t.port=r.pop()}this.agent=t.agent||false;this.hostname=t.hostname||(n.location?location.hostname:"localhost");this.port=t.port||(n.location&&location.port?location.port:this.secure?443:80);this.query=t.query||{};if("string"==typeof this.query)this.query=l.decode(this.query);this.upgrade=false!==t.upgrade;this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/";this.forceJSONP=!!t.forceJSONP;this.forceBase64=!!t.forceBase64;this.timestampParam=t.timestampParam||"t";this.timestampRequests=t.timestampRequests;this.transports=t.transports||["polling","websocket"];this.readyState="";this.writeBuffer=[];this.callbackBuffer=[];this.policyPort=t.policyPort||843;this.rememberUpgrade=t.rememberUpgrade||false;this.open();this.binaryType=null;this.onlyBinaryUpgrades=t.onlyBinaryUpgrades}function p(e){var t={};for(var n in e){if(e.hasOwnProperty(n)){t[n]=e[n]}}return t}var r=e("./transports");var i=e("emitter");var s=e("debug")("engine.io-client:socket");var o=e("indexof");var u=e("engine.io-parser");var a=e("parseuri");var f=e("parsejson");var l=e("parseqs");t.exports=h;h.priorWebsocketSuccess=false;i(h.prototype);h.protocol=u.protocol;h.Socket=h;h.Transport=e("./transport");h.transports=e("./transports");h.parser=e("engine.io-parser");h.prototype.createTransport=function(e){s('creating transport "%s"',e);var t=p(this.query);t.EIO=u.protocol;t.transport=e;if(this.id)t.sid=this.id;var n=new r[e]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,forceBase64:this.forceBase64,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this});return n};h.prototype.open=function(){var e;if(this.rememberUpgrade&&h.priorWebsocketSuccess&&this.transports.indexOf("websocket")!=-1){e="websocket"}else{e=this.transports[0]}this.readyState="opening";var e=this.createTransport(e);e.open();this.setTransport(e)};h.prototype.setTransport=function(e){s("setting transport %s",e.name);var t=this;if(this.transport){s("clearing existing transport %s",this.transport.name);this.transport.removeAllListeners()}this.transport=e;e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})};h.prototype.probe=function(e){function i(){if(r.onlyBinaryUpgrades){var i=!this.supportsBinary&&r.transport.supportsBinary;n=n||i}if(n)return;s('probe transport "%s" opened',e);t.send([{type:"ping",data:"probe"}]);t.once("packet",function(i){if(n)return;if("pong"==i.type&&"probe"==i.data){s('probe transport "%s" pong',e);r.upgrading=true;r.emit("upgrading",t);h.priorWebsocketSuccess="websocket"==t.name;s('pausing current transport "%s"',r.transport.name);r.transport.pause(function(){if(n)return;if("closed"==r.readyState||"closing"==r.readyState){return}s("changing transport and sending upgrade packet");c();r.setTransport(t);t.send([{type:"upgrade"}]);r.emit("upgrade",t);t=null;r.upgrading=false;r.flush()})}else{s('probe transport "%s" failed',e);var o=new Error("probe error");o.transport=t.name;r.emit("upgradeError",o)}})}function o(){if(n)return;n=true;c();t.close();t=null}function u(n){var i=new Error("probe error: "+n);i.transport=t.name;o();s('probe transport "%s" failed because of error: %s',e,n);r.emit("upgradeError",i)}function a(){u("transport closed")}function f(){u("socket closed")}function l(e){if(t&&e.name!=t.name){s('"%s" works - aborting "%s"',e.name,t.name);o()}}function c(){t.removeListener("open",i);t.removeListener("error",u);t.removeListener("close",a);r.removeListener("close",f);r.removeListener("upgrading",l)}s('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),n=false,r=this;h.priorWebsocketSuccess=false;t.once("open",i);t.once("error",u);t.once("close",a);this.once("close",f);this.once("upgrading",l);t.open()};h.prototype.onOpen=function(){s("socket open");this.readyState="open";h.priorWebsocketSuccess="websocket"==this.transport.name;this.emit("open");this.flush();if("open"==this.readyState&&this.upgrade&&this.transport.pause){s("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++){this.probe(this.upgrades[e])}}};h.prototype.onPacket=function(e){if("opening"==this.readyState||"open"==this.readyState){s('socket receive: type "%s", data "%s"',e.type,e.data);this.emit("packet",e);this.emit("heartbeat");switch(e.type){case"open":this.onHandshake(f(e.data));break;case"pong":this.setPing();break;case"error":var t=new Error("server error");t.code=e.data;this.emit("error",t);break;case"message":this.emit("data",e.data);this.emit("message",e.data);break}}else{s('packet received with socket readyState "%s"',this.readyState)}};h.prototype.onHandshake=function(e){this.emit("handshake",e);this.id=e.sid;this.transport.query.sid=e.sid;this.upgrades=this.filterUpgrades(e.upgrades);this.pingInterval=e.pingInterval;this.pingTimeout=e.pingTimeout;this.onOpen();if("closed"==this.readyState)return;this.setPing();this.removeListener("heartbeat",this.onHeartbeat);this.on("heartbeat",this.onHeartbeat)};h.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){if("closed"==t.readyState)return;t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)};h.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer);e.pingIntervalTimer=setTimeout(function(){s("writing ping packet - expecting pong within %sms",e.pingTimeout);e.ping();e.onHeartbeat(e.pingTimeout)},e.pingInterval)};h.prototype.ping=function(){this.sendPacket("ping")};h.prototype.onDrain=function(){for(var e=0;e<this.prevBufferLen;e++){if(this.callbackBuffer[e]){this.callbackBuffer[e]()}}this.writeBuffer.splice(0,this.prevBufferLen);this.callbackBuffer.splice(0,this.prevBufferLen);this.prevBufferLen=0;if(this.writeBuffer.length==0){this.emit("drain")}else{this.flush()}};h.prototype.flush=function(){if("closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){s("flushing %d packets in socket",this.writeBuffer.length);this.transport.send(this.writeBuffer);this.prevBufferLen=this.writeBuffer.length;this.emit("flush")}};h.prototype.write=h.prototype.send=function(e,t){this.sendPacket("message",e,t);return this};h.prototype.sendPacket=function(e,t,n){var r={type:e,data:t};this.emit("packetCreate",r);this.writeBuffer.push(r);this.callbackBuffer.push(n);this.flush()};h.prototype.close=function(){if("opening"==this.readyState||"open"==this.readyState){this.onClose("forced close");s("socket closing - telling transport to close");this.transport.close()}return this};h.prototype.onError=function(e){s("socket error %j",e);h.priorWebsocketSuccess=false;this.emit("error",e);this.onClose("transport error",e)};h.prototype.onClose=function(e,t){if("opening"==this.readyState||"open"==this.readyState){s('socket close with reason: "%s"',e);var n=this;clearTimeout(this.pingIntervalTimer);clearTimeout(this.pingTimeoutTimer);setTimeout(function(){n.writeBuffer=[];n.callbackBuffer=[];n.prevBufferLen=0},0);this.transport.removeAllListeners("close");this.transport.close();this.transport.removeAllListeners();this.readyState="closed";this.id=null;this.emit("close",e,t)}};h.prototype.filterUpgrades=function(e){var t=[];for(var n=0,r=e.length;n<r;n++){if(~o(this.transports,e[n]))t.push(e[n])}return t}}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./transport":4,"./transports":5,debug:12,emitter:13,"engine.io-parser":14,indexof:22,parsejson:24,parseqs:25,parseuri:26}],4:[function(e,t,n){function s(e){this.path=e.path;this.hostname=e.hostname;this.port=e.port;this.secure=e.secure;this.query=e.query;this.timestampParam=e.timestampParam;this.timestampRequests=e.timestampRequests;this.readyState="";this.agent=e.agent||false;this.socket=e.socket}var r=e("engine.io-parser");var i=e("emitter");t.exports=s;i(s.prototype);s.timestamps=0;s.prototype.onError=function(e,t){var n=new Error(e);n.type="TransportError";n.description=t;this.emit("error",n);return this};s.prototype.open=function(){if("closed"==this.readyState||""==this.readyState){this.readyState="opening";this.doOpen()}return this};s.prototype.close=function(){if("opening"==this.readyState||"open"==this.readyState){this.doClose();this.onClose()}return this};s.prototype.send=function(e){if("open"==this.readyState){this.write(e)}else{throw new Error("Transport not open")}};s.prototype.onOpen=function(){this.readyState="open";this.writable=true;this.emit("open")};s.prototype.onData=function(e){this.onPacket(r.decodePacket(e,this.socket.binaryType))};s.prototype.onPacket=function(e){this.emit("packet",e)};s.prototype.onClose=function(){this.readyState="closed";this.emit("close")}},{emitter:13,"engine.io-parser":14}],5:[function(e,t,n){(function(t){function u(e){var n;var o=false;if(t.location){var u="https:"==location.protocol;var a=location.port;if(!a){a=u?443:80}o=e.hostname!=location.hostname||a!=e.port}e.xdomain=o;n=new r(e);if("open"in n&&!e.forceJSONP){return new i(e)}else{return new s(e)}}var r=e("xmlhttprequest");var i=e("./polling-xhr");var s=e("./polling-jsonp");var o=e("./websocket");n.polling=u;n.websocket=o}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./polling-jsonp":6,"./polling-xhr":7,"./websocket":9,xmlhttprequest:10}],6:[function(e,t,n){(function(n){function f(){}function l(e){r.call(this,e);this.query=this.query||{};if(!u){if(!n.___eio)n.___eio=[];u=n.___eio}this.index=u.length;var t=this;u.push(function(e){t.onData(e)});this.query.j=this.index;if(n.document&&n.addEventListener){n.addEventListener("beforeunload",function(){if(t.script)t.script.onerror=f})}}var r=e("./polling");var i=e("inherits");t.exports=l;var s=/\n/g;var o=/\\n/g;var u;var a=0;i(l,r);l.prototype.supportsBinary=false;l.prototype.doClose=function(){if(this.script){this.script.parentNode.removeChild(this.script);this.script=null}if(this.form){this.form.parentNode.removeChild(this.form);this.form=null}r.prototype.doClose.call(this)};l.prototype.doPoll=function(){var e=this;var t=document.createElement("script");if(this.script){this.script.parentNode.removeChild(this.script);this.script=null}t.async=true;t.src=this.uri();t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n);this.script=t;var r="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);if(r){setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e);document.body.removeChild(e)},100)}};l.prototype.doWrite=function(e,t){function f(){l();t()}function l(){if(n.iframe){try{n.form.removeChild(n.iframe)}catch(e){n.onError("jsonp polling iframe removal error",e)}}try{var t='<iframe src="javascript:0" name="'+n.iframeId+'">';a=document.createElement(t)}catch(e){a=document.createElement("iframe");a.name=n.iframeId;a.src="javascript:0"}a.id=n.iframeId;n.form.appendChild(a);n.iframe=a}var n=this;if(!this.form){var r=document.createElement("form");var i=document.createElement("textarea");var u=this.iframeId="eio_iframe_"+this.index;var a;r.className="socketio";r.style.position="absolute";r.style.top="-1000px";r.style.left="-1000px";r.target=u;r.method="POST";r.setAttribute("accept-charset","utf-8");i.name="d";r.appendChild(i);document.body.appendChild(r);this.form=r;this.area=i}this.form.action=this.uri();l();e=e.replace(o,"\\\n");this.area.value=e.replace(s,"\\n");try{this.form.submit()}catch(c){}if(this.iframe.attachEvent){this.iframe.onreadystatechange=function(){if(n.iframe.readyState=="complete"){f()}}}else{this.iframe.onload=f}}}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./polling":8,inherits:23}],7:[function(e,t,n){(function(n){function a(){}function f(e){i.call(this,e);if(n.location){var t="https:"==location.protocol;var r=location.port;if(!r){r=t?443:80}this.xd=e.hostname!=n.location.hostname||r!=e.port}}function l(e){this.method=e.method||"GET";this.uri=e.uri;this.xd=!!e.xd;this.async=false!==e.async;this.data=undefined!=e.data?e.data:null;this.agent=e.agent;this.create(e.isBinary,e.supportsBinary)}function c(){for(var e in l.requests){if(l.requests.hasOwnProperty(e)){l.requests[e].abort()}}}var r=e("xmlhttprequest");var i=e("./polling");var s=e("emitter");var o=e("debug")("engine.io-client:polling-xhr");var u=e("inherits");t.exports=f;t.exports.Request=l;u(f,i);f.prototype.supportsBinary=true;f.prototype.request=function(e){e=e||{};e.uri=this.uri();e.xd=this.xd;e.agent=this.agent||false;e.supportsBinary=this.supportsBinary;return new l(e)};f.prototype.doWrite=function(e,t){var n=typeof e!=="string"&&e!==undefined;var r=this.request({method:"POST",data:e,isBinary:n});var i=this;r.on("success",t);r.on("error",function(e){i.onError("xhr post error",e)});this.sendXhr=r};f.prototype.doPoll=function(){o("xhr poll");var e=this.request();var t=this;e.on("data",function(e){t.onData(e)});e.on("error",function(e){t.onError("xhr poll error",e)});this.pollXhr=e};s(l.prototype);l.prototype.create=function(e,t){var i=this.xhr=new r({agent:this.agent,xdomain:this.xd});var s=this;try{o("xhr open %s: %s",this.method,this.uri);i.open(this.method,this.uri,this.async);if(t){i.responseType="arraybuffer"}if("POST"==this.method){try{if(e){i.setRequestHeader("Content-type","application/octet-stream")}else{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}}catch(u){}}if("withCredentials"in i){i.withCredentials=true}i.onreadystatechange=function(){var e;try{if(4!=i.readyState)return;if(200==i.status||1223==i.status){var n=i.getResponseHeader("Content-Type");if(n==="application/octet-stream"){e=i.response}else{if(!t){e=i.responseText}else{e="ok"}}}else{setTimeout(function(){s.onError(i.status)},0)}}catch(r){s.onError(r)}if(null!=e){s.onData(e)}};o("xhr data %s",this.data);i.send(this.data)}catch(u){setTimeout(function(){s.onError(u)},0);return}if(n.document){this.index=l.requestsCount++;l.requests[this.index]=this}};l.prototype.onSuccess=function(){this.emit("success");this.cleanup()};l.prototype.onData=function(e){this.emit("data",e);this.onSuccess()};l.prototype.onError=function(e){this.emit("error",e);this.cleanup()};l.prototype.cleanup=function(){if("undefined"==typeof this.xhr||null===this.xhr){return}this.xhr.onreadystatechange=a;try{this.xhr.abort()}catch(e){}if(n.document){delete l.requests[this.index]}this.xhr=null};l.prototype.abort=function(){this.cleanup()};if(n.document){l.requestsCount=0;l.requests={};if(n.attachEvent){n.attachEvent("onunload",c)}else if(n.addEventListener){n.addEventListener("beforeunload",c)}}}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./polling":8,debug:12,emitter:13,inherits:23,xmlhttprequest:10}],8:[function(e,t,n){function f(e){var t=e&&e.forceBase64;if(!a||t){this.supportsBinary=false}r.call(this,e)}var r=e("../transport");var i=e("parseqs");var s=e("engine.io-parser");var o=e("debug")("engine.io-client:polling");var u=e("inherits");t.exports=f;var a=function(){var t=e("xmlhttprequest");var n=new t({agent:this.agent,xdomain:false});return null!=n.responseType}();u(f,r);f.prototype.name="polling";f.prototype.doOpen=function(){this.poll()};f.prototype.pause=function(e){function r(){o("paused");n.readyState="paused";e()}var t=0;var n=this;this.readyState="pausing";if(this.polling||!this.writable){var i=0;if(this.polling){o("we are currently polling - waiting to pause");i++;this.once("pollComplete",function(){o("pre-pause polling complete");--i||r()})}if(!this.writable){o("we are currently writing - waiting to pause");i++;this.once("drain",function(){o("pre-pause writing complete");--i||r()})}}else{r()}};f.prototype.poll=function(){o("polling");this.polling=true;this.doPoll();this.emit("poll")};f.prototype.onData=function(e){var t=this;o("polling got data %s",e);var n=function(e,n,r){if("opening"==t.readyState){t.onOpen()}if("close"==e.type){t.onClose();return false}t.onPacket(e)};s.decodePayload(e,this.socket.binaryType,n);if("closed"!=this.readyState){this.polling=false;this.emit("pollComplete");if("open"==this.readyState){this.poll()}else{o('ignoring poll - transport state "%s"',this.readyState)}}};f.prototype.doClose=function(){function t(){o("writing close packet");e.write([{type:"close"}])}var e=this;if("open"==this.readyState){o("transport open - closing");t()}else{o("transport not open - deferring close");this.once("open",t)}};f.prototype.write=function(e){var t=this;this.writable=false;var n=function(){t.writable=true;t.emit("drain")};var t=this;s.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,n)})};f.prototype.uri=function(){var e=this.query||{};var t=this.secure?"https":"http";var n="";if(false!==this.timestampRequests){e[this.timestampParam]=+(new Date)+"-"+r.timestamps++}if(!this.supportsBinary&&!e.sid){e.b64=1}e=i.encode(e);if(this.port&&("https"==t&&this.port!=443||"http"==t&&this.port!=80)){n=":"+this.port}if(e.length){e="?"+e}return t+"://"+this.hostname+n+this.path+e}},{"../transport":4,debug:12,"engine.io-parser":14,inherits:23,parseqs:25,xmlhttprequest:10}],9:[function(e,t,n){function f(e){var t=e&&e.forceBase64;if(t){this.supportsBinary=false}r.call(this,e)}var r=e("../transport");var i=e("engine.io-parser");var s=e("parseqs");var o=e("debug")("engine.io-client:websocket");var u=e("inherits");var a=e("ws");t.exports=f;u(f,r);f.prototype.name="websocket";f.prototype.supportsBinary=true;f.prototype.doOpen=function(){if(!this.check()){return}var e=this;var t=this.uri();var n=void 0;var r={agent:this.agent};this.ws=new a(t,n,r);if(this.ws.binaryType===undefined){this.supportsBinary=false}this.ws.binaryType="arraybuffer";this.addEventListeners()};f.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()};this.ws.onclose=function(){e.onClose()};this.ws.onmessage=function(t){e.onData(t.data)};this.ws.onerror=function(t){e.onError("websocket error",t)}};if("undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)){f.prototype.onData=function(e){var t=this;setTimeout(function(){r.prototype.onData.call(t,e)},0)}}f.prototype.write=function(e){function s(){t.writable=true;t.emit("drain")}var t=this;this.writable=false;for(var n=0,r=e.length;n<r;n++){i.encodePacket(e[n],this.supportsBinary,function(e){try{t.ws.send(e)}catch(n){o("websocket closed before onclose event")}})}setTimeout(s,0)};f.prototype.onClose=function(){r.prototype.onClose.call(this)};f.prototype.doClose=function(){if(typeof this.ws!=="undefined"){this.ws.close()}};f.prototype.uri=function(){var e=this.query||{};var t=this.secure?"wss":"ws";var n="";if(this.port&&("wss"==t&&this.port!=443||"ws"==t&&this.port!=80)){n=":"+this.port}if(this.timestampRequests){e[this.timestampParam]=+(new Date)}if(!this.supportsBinary){e.b64=1}e=s.encode(e);if(e.length){e="?"+e}return t+"://"+this.hostname+n+this.path+e};f.prototype.check=function(){return!!a&&!("__initialize"in a&&this.name===f.prototype.name)}},{"../transport":4,debug:12,"engine.io-parser":14,inherits:23,parseqs:25,ws:27}],10:[function(e,t,n){var r=e("has-cors");t.exports=function(e){var t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||r)){return new XMLHttpRequest}}catch(n){}if(!t){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(n){}}}},{"has-cors":21}],11:[function(e,t,n){(function(e){function s(e,t){t=t||{};var r=new n;for(var i=0;i<e.length;i++){r.append(e[i])}return t.type?r.getBlob(t.type):r.getBlob()}var n=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder;var r=function(){try{var e=new Blob(["hi"]);return e.size==2}catch(t){return false}}();var i=n&&n.prototype.append&&n.prototype.getBlob;t.exports=function(){if(r){return e.Blob}else if(i){return s}else{return undefined}}()}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],12:[function(e,t,n){function r(e){if(!r.enabled(e))return function(){};return function(t){t=i(t);var n=new Date;var s=n-(r[e]||n);r[e]=n;t=e+" "+t+" +"+r.humanize(s);window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}}function i(e){if(e instanceof Error)return e.stack||e.message;return e}t.exports=r;r.names=[];r.skips=[];r.enable=function(e){try{localStorage.debug=e}catch(t){}var n=(e||"").split(/[\s,]+/),i=n.length;for(var s=0;s<i;s++){e=n[s].replace("*",".*?");if(e[0]==="-"){r.skips.push(new RegExp("^"+e.substr(1)+"$"))}else{r.names.push(new RegExp("^"+e+"$"))}}};r.disable=function(){r.enable("")};r.humanize=function(e){var t=1e3,n=60*1e3,r=60*n;if(e>=r)return(e/r).toFixed(1)+"h";if(e>=n)return(e/n).toFixed(1)+"m";if(e>=t)return(e/t|0)+"s";return e+"ms"};r.enabled=function(e){for(var t=0,n=r.skips.length;t<n;t++){if(r.skips[t].test(e)){return false}}for(var t=0,n=r.names.length;t<n;t++){if(r.names[t].test(e)){return true}}return false};try{if(window.localStorage)r.enable(localStorage.debug)}catch(s){}},{}],13:[function(e,t,n){function i(e){if(e)return s(e)}function s(e){for(var t in i.prototype){e[t]=i.prototype[t]}return e}var r=e("indexof");t.exports=i;i.prototype.on=function(e,t){this._callbacks=this._callbacks||{};(this._callbacks[e]=this._callbacks[e]||[]).push(t);return this};i.prototype.once=function(e,t){function r(){n.off(e,r);t.apply(this,arguments)}var n=this;this._callbacks=this._callbacks||{};t._off=r;this.on(e,r);return this};i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=function(e,t){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var n=this._callbacks[e];if(!n)return this;if(1==arguments.length){delete this._callbacks[e];return this}var i=r(n,t._off||t);if(~i)n.splice(i,1);return this};i.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r){n[r].apply(this,t)}}return this};i.prototype.listeners=function(e){this._callbacks=this._callbacks||{};return this._callbacks[e]||[]};i.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{indexof:22}],14:[function(e,t,n){(function(t){function p(e,t,r){if(!t){return n.encodeBase64Packet(e,r)}var i=e.data;var s=new Uint8Array(i);var o=new Uint8Array(1+i.byteLength);o[0]=f[e.type];for(var u=0;u<s.length;u++){o[u+1]=s[u]}return r(o.buffer)}function d(e,t,r){if(!t){return n.encodeBase64Packet(e,r)}var i=new FileReader;i.onload=function(){e.data=i.result;n.encodePacket(e,t,r)};return i.readAsArrayBuffer(e.data)}function v(e,t,r){if(!t){return n.encodeBase64Packet(e,r)}if(a){return d(e,t,r)}var i=new Uint8Array(1);i[0]=f[e.type];var s=new h([i.buffer,e.data]);return r(s)}function m(e,t,n){var r=new Array(e.length);var i=o(e.length,n);var s=function(e,n,i){t(n,function(t,n){r[e]=n;i(t,r)})};for(var u=0;u<e.length;u++){s(u,e[u],i)}}var r=e("./keys");var i=e("arraybuffer.slice");var s=e("base64-arraybuffer");var o=e("after");var u=e("utf8");var a=navigator.userAgent.match(/Android/i);n.protocol=2;var f=n.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6};var l=r(f);var c={type:"error",data:"parser error"};var h=e("blob");n.encodePacket=function(e,n,r){if(typeof n=="function"){r=n;n=false}var i=e.data===undefined?undefined:e.data.buffer||e.data;if(t.ArrayBuffer&&i instanceof ArrayBuffer){return p(e,n,r)}else if(h&&i instanceof t.Blob){return v(e,n,r)}var s=f[e.type];if(undefined!==e.data){s+=u.encode(String(e.data))}return r(""+s)};n.encodeBase64Packet=function(e,r){var i="b"+n.packets[e.type];if(h&&e.data instanceof h){var s=new FileReader;s.onload=function(){var e=s.result.split(",")[1];r(i+e)};return s.readAsDataURL(e.data)}var o;try{o=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(u){var a=new Uint8Array(e.data);var f=new Array(a.length);for(var l=0;l<a.length;l++){f[l]=a[l]}o=String.fromCharCode.apply(null,f)}i+=t.btoa(o);return r(i)};n.decodePacket=function(e,t){if(typeof e=="string"||e===undefined){if(e.charAt(0)=="b"){return n.decodeBase64Packet(e.substr(1),t)}e=u.decode(e);var r=e.charAt(0);if(Number(r)!=r||!l[r]){return c}if(e.length>1){return{type:l[r],data:e.substring(1)}}else{return{type:l[r]}}}var s=new Uint8Array(e);var r=s[0];var o=i(e,1);if(h&&t==="blob"){o=new h([o])}return{type:l[r],data:o}};n.decodeBase64Packet=function(e,n){var r=l[e.charAt(0)];if(!t.ArrayBuffer){return{type:r,data:{base64:true,data:e.substr(1)}}}var i=s.decode(e.substr(1));if(n==="blob"&&h){i=new h([i])}return{type:r,data:i}};n.encodePayload=function(e,t,r){function i(e){return e.length+":"+e}function s(e,r){n.encodePacket(e,t,function(e){r(null,i(e))})}if(typeof t=="function"){r=t;t=null}if(t){if(h&&!a){return n.encodePayloadAsBlob(e,r)}return n.encodePayloadAsArrayBuffer(e,r)}if(!e.length){return r("0:")}m(e,s,function(e,t){return r(t.join(""))})};n.decodePayload=function(e,t,r){if(typeof e!="string"){return n.decodePayloadAsBinary(e,t,r)}if(typeof t==="function"){r=t;t=null}var i;if(e==""){return r(c,0,1)}var s="",o,u;for(var a=0,f=e.length;a<f;a++){var l=e.charAt(a);if(":"!=l){s+=l}else{if(""==s||s!=(o=Number(s))){return r(c,0,1)}u=e.substr(a+1,o);if(s!=u.length){return r(c,0,1)}if(u.length){i=n.decodePacket(u,t);if(c.type==i.type&&c.data==i.data){return r(c,0,1)}var h=r(i,a+o,f);if(false===h)return}a+=o;s=""}}if(s!=""){return r(c,0,1)}};n.encodePayloadAsArrayBuffer=function(e,t){function r(e,t){n.encodePacket(e,true,function(e){return t(null,e)})}if(!e.length){return t(new ArrayBuffer(0))}m(e,r,function(e,n){var r=n.reduce(function(e,t){var n;if(typeof t==="string"){n=t.length}else{n=t.byteLength}return e+n.toString().length+n+2},0);var i=new Uint8Array(r);var s=0;n.forEach(function(e){var t=typeof e==="string";var n=e;if(t){var r=new Uint8Array(e.length);for(var o=0;o<e.length;o++){r[o]=e.charCodeAt(o)}n=r.buffer}if(t){i[s++]=0}else{i[s++]=1}var u=n.byteLength.toString();for(var o=0;o<u.length;o++){i[s++]=parseInt(u[o])}i[s++]=255;var r=new Uint8Array(n);for(var o=0;o<r.length;o++){i[s++]=r[o]}});return t(i.buffer)})};n.encodePayloadAsBlob=function(e,t){function r(e,t){n.encodePacket(e,true,function(e){var n=new Uint8Array(1);n[0]=1;if(typeof e==="string"){var r=new Uint8Array(e.length);for(var i=0;i<e.length;i++){r[i]=e.charCodeAt(i)}e=r.buffer;n[0]=0}var s=e instanceof ArrayBuffer?e.byteLength:e.size;var o=s.toString();var u=new Uint8Array(o.length+1);for(var i=0;i<o.length;i++){u[i]=parseInt(o[i])}u[o.length]=255;if(h){var a=new h([n.buffer,u.buffer,e]);t(null,a)}})}m(e,r,function(e,n){return t(new h(n))})};n.decodePayloadAsBinary=function(e,t,r){if(typeof t==="function"){r=t;t=null}var s=e;var o=[];while(s.byteLength>0){var u=new Uint8Array(s);var a=u[0]===0;var f="";for(var l=1;;l++){if(u[l]==255)break;f+=u[l]}s=i(s,2+f.length);f=parseInt(f);var c=i(s,0,f);if(a){try{c=String.fromCharCode.apply(null,new Uint8Array(c))}catch(h){var p=new Uint8Array(c);c="";for(var l=0;l<p.length;l++){c+=String.fromCharCode(p[l])}}}o.push(c);s=i(s,f)}var d=o.length;o.forEach(function(e,i){r(n.decodePacket(e,t),i,d)})}}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./keys":15,after:16,"arraybuffer.slice":17,"base64-arraybuffer":18,blob:11,utf8:19}],15:[function(e,t,n){t.exports=Object.keys||function(t){var n=[];var r=Object.prototype.hasOwnProperty;for(var i in t){if(r.call(t,i)){n.push(i)}}return n}},{}],16:[function(e,t,n){function r(e,t,n){function s(e,i){if(s.count<=0){throw new Error("after called too many times")}--s.count;if(e){r=true;t(e);t=n}else if(s.count===0&&!r){t(null,i)}}var r=false;n=n||i;s.count=e;return e===0?t():s}function i(){}t.exports=r},{}],17:[function(e,t,n){t.exports=function(e,t,n){var r=e.byteLength;t=t||0;n=n||r;if(e.slice){return e.slice(t,n)}if(t<0){t+=r}if(n<0){n+=r}if(n>r){n=r}if(t>=r||t>=n||r===0){return new ArrayBuffer(0)}var i=new Uint8Array(e);var s=new Uint8Array(n-t);for(var o=t,u=0;o<n;o++,u++){s[u]=i[o]}return s.buffer}},{}],18:[function(e,t,n){(function(e){"use strict";n.encode=function(t){var n=new Uint8Array(t),r,i=n.length,s="";for(r=0;r<i;r+=3){s+=e[n[r]>>2];s+=e[(n[r]&3)<<4|n[r+1]>>4];s+=e[(n[r+1]&15)<<2|n[r+2]>>6];s+=e[n[r+2]&63]}if(i%3===2){s=s.substring(0,s.length-1)+"="}else if(i%3===1){s=s.substring(0,s.length-2)+"=="}return s};n.decode=function(t){var n=t.length*.75,r=t.length,i,s=0,o,u,a,f;if(t[t.length-1]==="="){n--;if(t[t.length-2]==="="){n--}}var l=new ArrayBuffer(n),c=new Uint8Array(l);for(i=0;i<r;i+=4){o=e.indexOf(t[i]);u=e.indexOf(t[i+1]);a=e.indexOf(t[i+2]);f=e.indexOf(t[i+3]);c[s++]=o<<2|u>>4;c[s++]=(u&15)<<4|a>>2;c[s++]=(a&3)<<6|f&63}return l}})("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],19:[function(t,n,r){(function(t){(function(i){function f(e){var t=[];var n=0;var r=e.length;var i;var s;while(n<r){i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){s=e.charCodeAt(n++);if((s&64512)==56320){t.push(((i&1023)<<10)+(s&1023)+65536)}else{t.push(i);n--}}else{t.push(i)}}return t}function l(e){var t=e.length;var n=-1;var r;var i="";while(++n<t){r=e[n];if(r>65535){r-=65536;i+=a(r>>>10&1023|55296);r=56320|r&1023}i+=a(r)}return i}function c(e,t){return a(e>>t&63|128)}function h(e){if((e&4294967168)==0){return a(e)}var t="";if((e&4294965248)==0){t=a(e>>6&31|192)}else if((e&4294901760)==0){t=a(e>>12&15|224);t+=c(e,6)}else if((e&4292870144)==0){t=a(e>>18&7|240);t+=c(e,12);t+=c(e,6)}t+=a(e&63|128);return t}function p(e){var t=f(e);var n=t.length;var r=-1;var i;var s="";while(++r<n){i=t[r];s+=h(i)}return s}function d(){if(y>=g){throw Error("Invalid byte index")}var e=m[y]&255;y++;if((e&192)==128){return e&63}throw Error("Invalid continuation byte")}function v(){var e;var t;var n;var r;var i;if(y>g){throw Error("Invalid byte index")}if(y==g){return false}e=m[y]&255;y++;if((e&128)==0){return e}if((e&224)==192){var t=d();i=(e&31)<<6|t;if(i>=128){return i}else{throw Error("Invalid continuation byte")}}if((e&240)==224){t=d();n=d();i=(e&15)<<12|t<<6|n;if(i>=2048){return i}else{throw Error("Invalid continuation byte")}}if((e&248)==240){t=d();n=d();r=d();i=(e&15)<<18|t<<12|n<<6|r;if(i>=65536&&i<=1114111){return i}}throw Error("Invalid UTF-8 detected")}function b(e){m=f(e);g=m.length;y=0;var t=[];var n;while((n=v())!==false){t.push(n)}return l(t)}var s=typeof r=="object"&&r;var o=typeof n=="object"&&n&&n.exports==s&&n;var u=typeof t=="object"&&t;if(u.global===u||u.window===u){i=u}var a=String.fromCharCode;var m;var g;var y;var w={version:"2.0.0",encode:p,decode:b};if(typeof e=="function"&&typeof e.amd=="object"&&e.amd){e(function(){return w})}else if(s&&!s.nodeType){if(o){o.exports=w}else{var E={};var S=E.hasOwnProperty;for(var x in w){S.call(w,x)&&(s[x]=w[x])}}}else{i.utf8=w}})(this)}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],20:[function(e,t,n){t.exports=function(){return this}()},{}],21:[function(e,t,n){var r=e("global");try{t.exports="XMLHttpRequest"in r&&"withCredentials"in new r.XMLHttpRequest}catch(i){t.exports=false}},{global:20}],22:[function(e,t,n){var r=[].indexOf;t.exports=function(e,t){if(r)return e.indexOf(t);for(var n=0;n<e.length;++n){if(e[n]===t)return n}return-1}},{}],23:[function(e,t,n){if(typeof Object.create==="function"){t.exports=function(t,n){t.super_=n;t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}})}}else{t.exports=function(t,n){t.super_=n;var r=function(){};r.prototype=n.prototype;t.prototype=new r;t.prototype.constructor=t}}},{}],24:[function(e,t,n){(function(e){var n=/^[\],:{}\s]*$/;var r=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g;var i=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g;var s=/(?:^|:|,)(?:\s*\[)+/g;var o=/^\s+/;var u=/\s+$/;t.exports=function(a){if("string"!=typeof a||!a){return null}a=a.replace(o,"").replace(u,"");if(e.JSON&&JSON.parse){return JSON.parse(a)}if(n.test(a.replace(r,"@").replace(i,"]").replace(s,""))){return(new Function("return "+a))()}}}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],25:[function(e,t,n){n.encode=function(e){var t="";for(var n in e){if(e.hasOwnProperty(n)){if(t.length)t+="&";t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n])}}return t};n.decode=function(e){var t={};var n=e.split("&");for(var r=0,i=n.length;r<i;r++){var s=n[r].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t}},{}],26:[function(e,t,n){var r=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;var i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(t){var n=r.exec(t||""),s={},o=14;while(o--){s[i[o]]=n[o]||""}return s}},{}],27:[function(e,t,n){function s(e,t,n){var r;if(t){r=new i(e,t)}else{r=new i(e)}return r}var r=function(){return this}();var i=r.WebSocket||r.MozWebSocket;t.exports=i?s:null;if(i)s.prototype=i.prototype},{}]},{},[1])(1)})